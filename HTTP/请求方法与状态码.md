## 001. HTTP 的请求方法？
### 有哪些请求方法？
`http/1.1`规定了以下请求方法(注意，都是大写):

- GET: 通常用来获取资源
- HEAD: 获取资源的元信息
- POST: 提交数据，即上传数据
- PUT: 修改数据
- DELETE: 删除资源(几乎用不到)
- CONNECT: 建立连接隧道，用于代理服务器
- OPTIONS: 列出可对资源实行的请求方法，用来跨域请求
- TRACE: 追踪请求-响应的传输路径
### GET 和 POST 有什么区别？
首先最直观的是语义上的区别。
而后又有这样一些具体的差别:

- 从**缓存**的角度，GET 请求会被浏览器主动缓存下来，留下历史记录，而 POST 默认不会。
- 从**编码**的角度，GET 只能进行 URL 编码，只能接收 ASCII 字符，而 POST 没有限制。
- 从**参数**的角度，GET 一般放在 URL 中，因此不安全，POST 放在请求体中，更适合传输敏感信息。
- 从**幂等性**的角度，`GET`是**幂等**的，而`POST`不是。(`幂等`表示执行相同的操作，结果也是相同的)
- 从**TCP**的角度，GET 请求会把请求报文一次性发出去，而 POST 会分为两个 TCP 数据包，首先发 header 部分，如果服务器响应 100(continue)， 然后发 body 部分。(**火狐**浏览器除外，它的 POST 请求只发一个 TCP 包)
## 002: 如何理解 HTTP 状态码？
RFC 规定 HTTP 的状态码为**三位数**，被分为五类:

- **1xx**: 表示目前是协议处理的中间状态，还需要后续操作。
- **2xx**: 表示成功状态。
- **3xx**: 重定向状态，资源位置发生变动，需要重新请求。
- **4xx**: 请求报文有误。
- **5xx**: 服务器端发生错误。

接下来就一一分析这里面具体的状态码。
### 1xx
**101 Switching Protocols**。在`HTTP`升级为`WebSocket`的时候，如果服务器同意变更，就会发送状态码 101。
### 2xx
**200 OK**是见得最多的成功状态码。通常在响应体中放有数据。  
**204 No Content**含义与 200 相同，但响应头后没有 body 数据。  
**206 Partial Content**顾名思义，表示部分内容，它的使用场景为 **HTTP 分块下载**和**断点续传**，当然也会带上相应的响应头字段`Content-Range`。
### 3xx
**301 Moved Permanently**即永久重定向，对应着**302 Found**，即临时重定向。
比如你的网站从 HTTP 升级到了 HTTPS 了，以前的站点再也不用了，应当返回`301`，这个时候浏览器默认会做缓存优化，在第二次访问的时候自动访问重定向的那个地址。
而如果只是暂时不可用，那么直接返回`302`即可，和`301`不同的是，浏览器并不会做缓存优化。  
**304 Not Modified**: 当协商缓存命中时会返回这个状态码。详见 **浏览器缓存**
### 4xx
**400 Bad Request**: 开发者经常看到一头雾水，只是笼统地提示了一下错误，并不知道哪里出错了。  
**403 Forbidden**: 这实际上并不是请求报文出错，而是服务器禁止访问，原因有很多，比如法律禁止、信息敏感。  
**404 Not Found**: 资源未找到，表示没在服务器上找到相应的资源。  
**405 Method Not Allowed**: 请求方法不被服务器端允许。  
**406 Not Acceptable**: 资源无法满足客户端的条件。  
**408 Request Timeout**: 服务器等待了太长时间。  
**409 Conflict**: 多个请求发生了冲突。  
**413 Request Entity Too Large**: 请求体的数据过大。  
**414 Request-URI Too Long**: 请求行里的 URI 太大。  
**429 Too Many Request**: 客户端发送的请求过多。  
**431 Request Header Fields Too Large**请求头的字段内容太大。  
### 5xx
**500 Internal Server Error**: 仅仅告诉你服务器出错了，出了啥错咱也不知道。  
**501 Not Implemented**: 表示客户端请求的功能还不支持。   
**502 Bad Gateway**: 服务器自身是正常的，但访问的时候出错了，啥错误咱也不知道。   
**503 Service Unavailable**: 表示服务器当前很忙，暂时无法响应服务。  
## 005: HTTP 的特点与缺点
### HTTP 特点
HTTP 的特点概括如下:

1. **灵活可扩展**，主要体现在两个方面。一个是语义上的自由，只规定了基本格式，比如空格分隔单词，换行分隔字段，其他的各个部分都没有严格的语法限制。另一个是传输形式的多样性，不仅仅可以传输文本，还能传输图片、视频等任意数据，非常方便。

1. **可靠传输**。HTTP 基于 TCP/IP，因此把这一特性继承了下来。这属于 TCP 的特性，不具体介绍了。

1. **请求-应答**。也就是`一发一收`、`有来有回`， 当然这个请求方和应答方不单单指客户端和服务器之间，如果某台服务器作为代理来连接后端的服务端，那么这台服务器也会扮演**请求方**的角色。

1. **无状态**。这里的状态是指**通信过程的上下文信息**，而每次 http 请求都是独立、无关的，默认不需要保留状态信息。

### HTTP 缺点
#### 无状态
所谓的优点和缺点还是要分场景来看的，对于 HTTP 而言，最具争议的地方在于它的**无状态**。
在需要长连接的场景中，需要保存大量的上下文信息，以免传输大量重复的信息，那么这时候无状态就是 http 的缺点了。
但与此同时，另外一些应用仅仅只是为了获取一些数据，不需要保存连接上下文信息，无状态反而减少了网络开销，成为了 http 的优点。
#### 明文传输
即协议里的报文(主要指的是头部)不使用二进制数据，而是文本形式。
这当然对于调试提供了便利，但同时也让 HTTP 的报文信息暴露给了外界，给攻击者也提供了便利。`WIFI陷阱`就是利用 HTTP 明文传输的缺点，诱导你连上热点，然后疯狂抓你所有的流量，从而拿到你的敏感信息。
#### 队头阻塞问题
当 http 开启长连接时，共用一个 TCP 连接，同一时刻只能处理一个请求，那么当前请求耗时过长的情况下，其它的请求只能处于阻塞状态，也就是著名的**队头阻塞**问题。接下来会有一小节讨论这个问题。
